{"filter":false,"title":"sessions_controller.rb","tooltip":"/monolist/app/controllers/sessions_controller.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":10,"column":0},"action":"remove","lines":["class SessionsController < ApplicationController","  def new","  end","","  def create","  end","","  def destroy","  end","end",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":32,"column":3},"action":"insert","lines":["class SessionsController < ApplicationController","  def new","  end","","  def create","    email = params[:session][:email].downcase","    password = params[:session][:password]","    if login(email, password)","      flash[:success] = 'ログインに成功しました。'","      redirect_to @user","    else","      flash.now[:danger] = 'ログインに失敗しました。'","      render 'new'","    end","  end","","  def destroy","  end","","  private","","  def login(email, password)","    @user = User.find_by(email: email)","    if @user && @user.authenticate(password)","      # ログイン成功","      session[:user_id] = @user.id","      return true","    else","      # ログイン失敗","      return false","    end","  end","end"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":32,"column":3},"end":{"row":32,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1548228082591,"hash":"453b2fdd4d7f9f5e500ffa03b4650f02af57334f"}